{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n//\tОтримання зображень з Pixabay\nconst API_KEY = '43767722-bbce12454ab409ccbfe76519c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getPictures(searchTerm, page = 1) {\n  if (searchTerm.includes(' ')) {\n    searchTerm = searchTerm.replace(/\\s+/g, '+');\n  }\n\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchTerm,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n\n  try {\n    const response = await axios.get(`${BASE_URL}?${searchParams}`);\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.statusText);\n  }\n}","import 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\n//\tСтворення картки зображення:\nexport function createImageCard(image) {\n  return `\n    <div class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n      </a>\n      <div class=\"thumb-block\">\n        ${createInfoBlock('Likes', image.likes)}\n        ${createInfoBlock('Views', image.views)}\n        ${createInfoBlock('Comments', image.comments)}\n        ${createInfoBlock('Downloads', image.downloads)}\n      </div>\n    </div>\n  `;\n}\n\nfunction createInfoBlock(label, value) {\n  return `\n    <div class=\"block\">\n      <h2 class=\"title\">${label}</h2>\n      <p class=\"amount\">${value}</p>\n    </div>\n  `;\n}\n\n//Оновлення галереї\nexport function updateGallery(images) {\n  const galleryList = document.querySelector('.gallery');\n  const cardsHTML = images.map(image => createImageCard(image)).join('');\n  galleryList.insertAdjacentHTML('beforeend', cardsHTML);\n}\n\n//Повідомлення про помилку\nexport function showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n  });\n}\n\n//Показ та приховання індикатора завантаження\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.style.display = 'block';\n  }\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.style.display = 'none';\n  }\n}","import { getPictures } from './js/pixabay-api.js';\nimport { updateGallery, showErrorMessage, showLoader, hideLoader } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n//Ініціалізація SimpleLightbox:\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  overlay: true,\n  close: true,\n  className: 'custom-lightbox',\n});\n\n//Основні змінні \nconst searchForm = document.querySelector('.js-search');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.btn-load-more');\nconst upBtn = document.querySelector('.up-btn');\nconst endLoader = document.querySelector('.end-loader');\n\nlet searchTerm = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\n//Обробник подій для форми пошуку\nsearchForm.addEventListener('submit', (event) => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n  endLoader.style.display = 'none';\n  searchTerm = event.target.elements.search.value.trim();\n  currentPage = 1;\n\n  if (!searchTerm) {\n    showErrorMessage('Please enter a valid search term!');\n    return;\n  }\n\n  fetchPictures();\n});\n\n//Обробник подій для кнопки \"Load more\"\nloadMoreBtn.addEventListener('click', () => {\n  currentPage += 1;\n  fetchPictures();\n});\n\n//Функція для отримання зображень\nasync function fetchPictures() {\n  try {\n    showLoader();\n    loadMoreBtn.style.display = 'none';\n    endLoader.style.display = 'none';\n\n    const images = await getPictures(searchTerm, currentPage);\n\n    hideLoader();\n    if (currentPage === 1 && !images.hits.length) {\n      showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n      return;\n    }\n\n    updateGallery(images.hits);\n    lightbox.refresh();\n\n    totalHits = images.totalHits;\n\n    if (images.hits.length < 15 || totalHits <= currentPage * 15) {\n      endLoader.style.display = 'block';\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    smoothScroll();\n  } catch (error) {\n    hideLoader();\n    showErrorMessage('Something went wrong. Please try again.');\n    console.error(error);\n  }\n}\n\n//Функція плавного прокручування\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n//Обробник подій для кнопки прокручування вверх\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > 300) {\n    upBtn.classList.add('show');\n  } else {\n    upBtn.classList.remove('show');\n  }\n});\n\nupBtn.addEventListener('click', (event) => {\n  event.preventDefault();\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});"],"names":["API_KEY","BASE_URL","getPictures","searchTerm","page","searchParams","axios","error","createImageCard","image","createInfoBlock","label","value","updateGallery","images","galleryList","cardsHTML","showErrorMessage","message","iziToast","showLoader","loader","hideLoader","lightbox","SimpleLightbox","searchForm","gallery","loadMoreBtn","upBtn","endLoader","currentPage","totalHits","event","fetchPictures","smoothScroll","cardHeight"],"mappings":"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"}